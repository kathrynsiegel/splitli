  [1m[36m (4.5ms)[0m  [1mCREATE TABLE "items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "purchase_id" integer, "title" varchar(255), "amount" float, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.1ms)[0m  CREATE TABLE "purchases" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "owner_phone_number" varchar(255), "owner_name" varchar(255), "receipt_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.1ms)[0m  [1mCREATE TABLE "receipts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "title" varchar(255), "percent_paid" float, "total_amount" float, "tip" float, "split_type" varchar(255), "been_sent" boolean, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.4ms)[0m  CREATE TABLE "sessions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.5ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uid" integer, "name" varchar(255), "provider" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.4ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (3.0ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (3.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131103205453')[0m
  [1m[35m (3.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043855')
  [1m[36m (3.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131023043918')[0m
  [1m[35m (3.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043939')
  [1m[36m (3.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131101195444')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "items"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "items" ("purchase_id", "title", "amount", "created_at", "updated_at", "id") VALUES (1, 'a', 1.0, '2013-11-04 04:35:15', '2013-11-04 04:35:15', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "items" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:35:15', '2013-11-04 04:35:15', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "purchases"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "purchases" ("owner_name", "receipt_id", "owner_phone_number", "created_at", "updated_at", "id") VALUES ('test_owner_1', 1, '0000000000', '2013-11-04 04:35:15', '2013-11-04 04:35:15', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "purchases" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:35:15', '2013-11-04 04:35:15', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "receipts"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "receipts" ("id", "user_id", "title", "split_type", "been_sent", "created_at", "updated_at") VALUES (1, 1, 'test_receipt_1', 'Split Evenly', 'f', '2013-11-04 04:35:15', '2013-11-04 04:35:15')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "receipts" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:35:15', '2013-11-04 04:35:15', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "sessions"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:35:15', '2013-11-04 04:35:15', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:35:15', '2013-11-04 04:35:15', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("id", "uid", "name", "provider", "created_at", "updated_at") VALUES (1, 123456, 'test_user_1', 'venmo', '2013-11-04 04:35:15', '2013-11-04 04:35:15')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:35:15', '2013-11-04 04:35:15', 298486374)[0m
  [1m[35m (3.3ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
ItemTest: test_validates_amount_presence
----------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------
ItemTest: test_validates_title_presence
---------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
PurchaseTest: test_create_item
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? AND "items"."title" = 'item1' LIMIT 1  [["purchase_id", 980190963]]
  [1m[36m (5.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
PurchaseTest: test_get_total
----------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 298.02], ["created_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00], ["purchase_id", 980190963], ["title", "item2"], ["updated_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 3.33], ["created_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00], ["purchase_id", 980190963], ["title", "item3"], ["updated_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (3.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
PurchaseTest: test_reformat_phone_number
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
PurchaseTest: test_validates_owner_name_presence
------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
PurchaseTest: test_validates_phone_number
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------
ReceiptTest: test_add_only_tip
------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.1ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963[0m  [["amount", 1.1], ["updated_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------
ReceiptTest: test_add_tax_and_tip
---------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.1ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 2.22], ["created_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?  [["purchase_id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963  [["amount", 1.18], ["updated_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964[0m  [["amount", 2.62], ["updated_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
ReceiptTest: test_split_evenly
------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "receipts" ("created_at", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.1ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00], ["purchase_id", 980190963], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00], ["purchase_id", 980190964], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1[0m  [["purchase_id", 980190963]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1  [["purchase_id", 980190964]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1[0m  [["purchase_id", 980190963]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190964]]
  [1m[36m (3.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------
ReceiptTest: test_split_purchases
---------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------
ReceiptTest: test_validates_title
---------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "receipts" ("created_at", "title", "updated_at") VALUES (?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00], ["title", "a"], ["updated_at", Mon, 04 Nov 2013 04:35:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.7ms)[0m  rollback transaction
  [1m[36m (5.9ms)[0m  [1mCREATE TABLE "items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "purchase_id" integer, "title" varchar(255), "amount" float, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.1ms)[0m  CREATE TABLE "purchases" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "owner_phone_number" varchar(255), "owner_name" varchar(255), "receipt_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.5ms)[0m  [1mCREATE TABLE "receipts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "title" varchar(255), "percent_paid" float, "total_amount" float, "tip" float, "split_type" varchar(255), "been_sent" boolean, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.1ms)[0m  CREATE TABLE "sessions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.0ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uid" integer, "name" varchar(255), "provider" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.4ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (3.0ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (2.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131103205453')[0m
  [1m[35m (3.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043855')
  [1m[36m (3.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131023043918')[0m
  [1m[35m (3.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043939')
  [1m[36m (3.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131101195444')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "items"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "items" ("purchase_id", "title", "amount", "created_at", "updated_at", "id") VALUES (1, 'a', 1.0, '2013-11-04 04:35:34', '2013-11-04 04:35:34', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "items" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:35:34', '2013-11-04 04:35:34', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "purchases"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "purchases" ("owner_name", "receipt_id", "owner_phone_number", "created_at", "updated_at", "id") VALUES ('test_owner_1', 1, '0000000000', '2013-11-04 04:35:34', '2013-11-04 04:35:34', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "purchases" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:35:34', '2013-11-04 04:35:34', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "receipts"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "receipts" ("id", "user_id", "title", "split_type", "been_sent", "created_at", "updated_at") VALUES (1, 1, 'test_receipt_1', 'Split Evenly', 'f', '2013-11-04 04:35:34', '2013-11-04 04:35:34')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "receipts" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:35:34', '2013-11-04 04:35:34', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "sessions"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:35:34', '2013-11-04 04:35:34', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:35:34', '2013-11-04 04:35:34', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("id", "uid", "name", "provider", "created_at", "updated_at") VALUES (1, 123456, 'test_user_1', 'venmo', '2013-11-04 04:35:34', '2013-11-04 04:35:34')
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:35:34', '2013-11-04 04:35:34', 298486374)[0m
  [1m[35m (4.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
ItemTest: test_validates_amount_presence
----------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------
ItemTest: test_validates_title_presence
---------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
PurchaseTest: test_create_item
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.2ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? AND "items"."title" = 'item1' LIMIT 1  [["purchase_id", 980190963]]
  [1m[36m (3.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
PurchaseTest: test_get_total
----------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 298.02], ["created_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00], ["purchase_id", 980190963], ["title", "item2"], ["updated_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 3.33], ["created_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00], ["purchase_id", 980190963], ["title", "item3"], ["updated_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (3.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
PurchaseTest: test_reformat_phone_number
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
PurchaseTest: test_validates_owner_name_presence
------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
PurchaseTest: test_validates_phone_number
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------
ReceiptTest: test_add_only_tip
------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.1ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963[0m  [["amount", 1.1], ["updated_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------
ReceiptTest: test_add_tax_and_tip
---------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.1ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 2.22], ["created_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?  [["purchase_id", 980190963]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963  [["amount", 1.18], ["updated_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964[0m  [["amount", 2.62], ["updated_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
ReceiptTest: test_split_evenly
------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "receipts" ("created_at", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.1ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00], ["purchase_id", 980190963], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00], ["purchase_id", 980190964], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1[0m  [["purchase_id", 980190963]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1  [["purchase_id", 980190964]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1[0m  [["purchase_id", 980190963]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190964]]
  [1m[36m (3.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------
ReceiptTest: test_split_purchases
---------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------
ReceiptTest: test_validates_title
---------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "receipts" ("created_at", "title", "updated_at") VALUES (?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00], ["title", "a"], ["updated_at", Mon, 04 Nov 2013 04:35:34 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (6.6ms)[0m  [1mCREATE TABLE "items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "purchase_id" integer, "title" varchar(255), "amount" float, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.3ms)[0m  CREATE TABLE "purchases" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "owner_phone_number" varchar(255), "owner_name" varchar(255), "receipt_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.2ms)[0m  [1mCREATE TABLE "receipts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "title" varchar(255), "percent_paid" float, "total_amount" float, "tip" float, "split_type" varchar(255), "been_sent" boolean, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.1ms)[0m  CREATE TABLE "sessions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.2ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uid" integer, "name" varchar(255), "provider" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.3ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (2.9ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (3.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131103205453')[0m
  [1m[35m (2.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043855')
  [1m[36m (2.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131023043918')[0m
  [1m[35m (3.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043939')
  [1m[36m (3.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131101195444')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "items"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "items" ("purchase_id", "title", "amount", "created_at", "updated_at", "id") VALUES (1, 'a', 1.0, '2013-11-04 04:36:16', '2013-11-04 04:36:16', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "items" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:36:16', '2013-11-04 04:36:16', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "purchases"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "purchases" ("owner_name", "receipt_id", "owner_phone_number", "created_at", "updated_at", "id") VALUES ('test_owner_1', 1, '0000000000', '2013-11-04 04:36:16', '2013-11-04 04:36:16', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "purchases" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:36:16', '2013-11-04 04:36:16', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "receipts"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "receipts" ("id", "user_id", "title", "split_type", "been_sent", "created_at", "updated_at") VALUES (1, 1, 'test_receipt_1', 'Split Evenly', 'f', '2013-11-04 04:36:16', '2013-11-04 04:36:16')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "receipts" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:36:16', '2013-11-04 04:36:16', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "sessions"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:36:16', '2013-11-04 04:36:16', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:36:16', '2013-11-04 04:36:16', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("id", "uid", "name", "provider", "created_at", "updated_at") VALUES (1, 123456, 'test_user_1', 'venmo', '2013-11-04 04:36:16', '2013-11-04 04:36:16')
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:36:16', '2013-11-04 04:36:16', 298486374)[0m
  [1m[35m (4.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
ItemTest: test_validates_amount_presence
----------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.2ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------
ItemTest: test_validates_title_presence
---------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
PurchaseTest: test_create_item
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? AND "items"."title" = 'item1' LIMIT 1  [["purchase_id", 980190963]]
  [1m[36m (3.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
PurchaseTest: test_get_total
----------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 298.02], ["created_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00], ["purchase_id", 980190963], ["title", "item2"], ["updated_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 3.33], ["created_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00], ["purchase_id", 980190963], ["title", "item3"], ["updated_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (3.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
PurchaseTest: test_reformat_phone_number
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
PurchaseTest: test_validates_owner_name_presence
------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
PurchaseTest: test_validates_phone_number
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (15.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
ReceiptTest: test_add_only_tip
------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963[0m  [["amount", 1.1], ["updated_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------
ReceiptTest: test_add_tax_and_tip
---------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.1ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 2.22], ["created_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?  [["purchase_id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963  [["amount", 1.18], ["updated_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964[0m  [["amount", 2.62], ["updated_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (4.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------
ReceiptTest: test_split_evenly
------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "receipts" ("created_at", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.1ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00], ["purchase_id", 980190963], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00], ["purchase_id", 980190964], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1[0m  [["purchase_id", 980190963]]
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1  [["purchase_id", 980190964]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1[0m  [["purchase_id", 980190963]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190964]]
  [1m[36m (3.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------
ReceiptTest: test_split_purchases
---------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------
ReceiptTest: test_validates_title
---------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "receipts" ("created_at", "title", "updated_at") VALUES (?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00], ["title", "a"], ["updated_at", Mon, 04 Nov 2013 04:36:16 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.9ms)[0m  rollback transaction
  [1m[36m (7.3ms)[0m  [1mCREATE TABLE "items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "purchase_id" integer, "title" varchar(255), "amount" float, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.0ms)[0m  CREATE TABLE "purchases" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "owner_phone_number" varchar(255), "owner_name" varchar(255), "receipt_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.1ms)[0m  [1mCREATE TABLE "receipts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "title" varchar(255), "percent_paid" float, "total_amount" float, "tip" float, "split_type" varchar(255), "been_sent" boolean, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.1ms)[0m  CREATE TABLE "sessions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.0ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uid" integer, "name" varchar(255), "provider" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.1ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (3.1ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (3.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131103205453')[0m
  [1m[35m (2.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043855')
  [1m[36m (3.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131023043918')[0m
  [1m[35m (3.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043939')
  [1m[36m (3.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131101195444')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "items"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "items" ("purchase_id", "title", "amount", "created_at", "updated_at", "id") VALUES (1, 'a', 1.0, '2013-11-04 04:36:53', '2013-11-04 04:36:53', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "items" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:36:53', '2013-11-04 04:36:53', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "purchases"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "purchases" ("owner_name", "receipt_id", "owner_phone_number", "created_at", "updated_at", "id") VALUES ('test_owner_1', 1, '0000000000', '2013-11-04 04:36:53', '2013-11-04 04:36:53', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "purchases" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:36:53', '2013-11-04 04:36:53', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "receipts"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "receipts" ("id", "user_id", "title", "split_type", "been_sent", "created_at", "updated_at") VALUES (1, 1, 'test_receipt_1', 'Split Evenly', 'f', '2013-11-04 04:36:53', '2013-11-04 04:36:53')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "receipts" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:36:53', '2013-11-04 04:36:53', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "sessions"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:36:53', '2013-11-04 04:36:53', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:36:53', '2013-11-04 04:36:53', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("id", "uid", "name", "provider", "created_at", "updated_at") VALUES (1, 123456, 'test_user_1', 'venmo', '2013-11-04 04:36:53', '2013-11-04 04:36:53')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:36:53', '2013-11-04 04:36:53', 298486374)[0m
  [1m[35m (4.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
ItemTest: test_validates_amount_presence
----------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.2ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------
ItemTest: test_validates_title_presence
---------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
PurchaseTest: test_create_item
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? AND "items"."title" = 'item1' LIMIT 1  [["purchase_id", 980190963]]
  [1m[36m (3.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------
PurchaseTest: test_get_total
----------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 298.02], ["created_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00], ["purchase_id", 980190963], ["title", "item2"], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 3.33], ["created_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00], ["purchase_id", 980190963], ["title", "item3"], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (2.9ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
PurchaseTest: test_reformat_phone_number
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
PurchaseTest: test_validates_owner_name_presence
------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.1ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
PurchaseTest: test_validates_phone_number
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------
ReceiptTest: test_add_only_tip
------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963[0m  [["amount", 1.1], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_add_tax_and_tip
---------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 2.22], ["created_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963[0m  [["amount", 1.18], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964  [["amount", 2.62], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
ReceiptTest: test_split_evenly
------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "receipts" ("created_at", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.1ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00], ["purchase_id", 980190963], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00], ["purchase_id", 980190964], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1[0m  [["purchase_id", 980190963]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190964]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35m (3.5ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_split_purchases
---------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_validates_title
---------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "receipts" ("created_at", "title", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00], ["title", "a"], ["updated_at", Mon, 04 Nov 2013 04:36:53 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[36m (6.9ms)[0m  [1mCREATE TABLE "items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "purchase_id" integer, "title" varchar(255), "amount" float, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.2ms)[0m  CREATE TABLE "purchases" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "owner_phone_number" varchar(255), "owner_name" varchar(255), "receipt_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.0ms)[0m  [1mCREATE TABLE "receipts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "title" varchar(255), "percent_paid" float, "total_amount" float, "tip" float, "split_type" varchar(255), "been_sent" boolean, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.1ms)[0m  CREATE TABLE "sessions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.1ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uid" integer, "name" varchar(255), "provider" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.1ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (3.0ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (3.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131103205453')[0m
  [1m[35m (3.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043855')
  [1m[36m (2.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131023043918')[0m
  [1m[35m (3.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043939')
  [1m[36m (2.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131101195444')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "items"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "items" ("purchase_id", "title", "amount", "created_at", "updated_at", "id") VALUES (1, 'a', 1.0, '2013-11-04 04:37:14', '2013-11-04 04:37:14', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "items" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:37:14', '2013-11-04 04:37:14', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "purchases"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "purchases" ("owner_name", "receipt_id", "owner_phone_number", "created_at", "updated_at", "id") VALUES ('test_owner_1', 1, '0000000000', '2013-11-04 04:37:14', '2013-11-04 04:37:14', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "purchases" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:37:14', '2013-11-04 04:37:14', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "receipts"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "receipts" ("id", "user_id", "title", "split_type", "been_sent", "created_at", "updated_at") VALUES (1, 1, 'test_receipt_1', 'Split Evenly', 'f', '2013-11-04 04:37:14', '2013-11-04 04:37:14')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "receipts" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:37:14', '2013-11-04 04:37:14', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "sessions"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:37:14', '2013-11-04 04:37:14', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:37:14', '2013-11-04 04:37:14', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("id", "uid", "name", "provider", "created_at", "updated_at") VALUES (1, 123456, 'test_user_1', 'venmo', '2013-11-04 04:37:14', '2013-11-04 04:37:14')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:37:14', '2013-11-04 04:37:14', 298486374)[0m
  [1m[35m (5.2ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
ItemTest: test_validates_amount_presence
----------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.2ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------
ItemTest: test_validates_title_presence
---------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
PurchaseTest: test_create_item
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? AND "items"."title" = 'item1' LIMIT 1  [["purchase_id", 980190963]]
  [1m[36m (3.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------
PurchaseTest: test_get_total
----------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 298.02], ["created_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00], ["purchase_id", 980190963], ["title", "item2"], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 3.33], ["created_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00], ["purchase_id", 980190963], ["title", "item3"], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (3.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
PurchaseTest: test_reformat_phone_number
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
PurchaseTest: test_validates_owner_name_presence
------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
PurchaseTest: test_validates_phone_number
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
ReceiptTest: test_add_only_tip
------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.1ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963[0m  [["amount", 1.1], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_add_tax_and_tip
---------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 2.22], ["created_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963[0m  [["amount", 1.18], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964  [["amount", 2.62], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
ReceiptTest: test_split_evenly
------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "receipts" ("created_at", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.1ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00], ["purchase_id", 980190963], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00], ["purchase_id", 980190964], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1[0m  [["purchase_id", 980190963]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190964]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_split_purchases
---------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_validates_title
---------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "receipts" ("created_at", "title", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00], ["title", "a"], ["updated_at", Mon, 04 Nov 2013 04:37:15 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.7ms)[0m  [1mrollback transaction[0m
  [1m[36m (4.0ms)[0m  [1mCREATE TABLE "items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "purchase_id" integer, "title" varchar(255), "amount" float, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.3ms)[0m  CREATE TABLE "purchases" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "owner_phone_number" varchar(255), "owner_name" varchar(255), "receipt_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.1ms)[0m  [1mCREATE TABLE "receipts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "title" varchar(255), "percent_paid" float, "total_amount" float, "tip" float, "split_type" varchar(255), "been_sent" boolean, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.0ms)[0m  CREATE TABLE "sessions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.3ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uid" integer, "name" varchar(255), "provider" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.2ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (3.1ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (3.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131103205453')[0m
  [1m[35m (3.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043855')
  [1m[36m (2.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131023043918')[0m
  [1m[35m (3.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043939')
  [1m[36m (3.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131101195444')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "items"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "items" ("purchase_id", "title", "amount", "created_at", "updated_at", "id") VALUES (1, 'a', 1.0, '2013-11-04 04:37:52', '2013-11-04 04:37:52', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "items" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:37:52', '2013-11-04 04:37:52', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "purchases"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "purchases" ("owner_name", "receipt_id", "owner_phone_number", "created_at", "updated_at", "id") VALUES ('test_owner_1', 1, '0000000000', '2013-11-04 04:37:52', '2013-11-04 04:37:52', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "purchases" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:37:52', '2013-11-04 04:37:52', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "receipts"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "receipts" ("id", "user_id", "title", "split_type", "been_sent", "created_at", "updated_at") VALUES (1, 1, 'test_receipt_1', 'Split Evenly', 'f', '2013-11-04 04:37:52', '2013-11-04 04:37:52')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "receipts" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:37:52', '2013-11-04 04:37:52', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "sessions"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:37:52', '2013-11-04 04:37:52', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:37:52', '2013-11-04 04:37:52', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("id", "uid", "name", "provider", "created_at", "updated_at") VALUES (1, 123456, 'test_user_1', 'venmo', '2013-11-04 04:37:52', '2013-11-04 04:37:52')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:37:52', '2013-11-04 04:37:52', 298486374)[0m
  [1m[35m (4.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
ItemTest: test_validates_amount_presence
----------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------
ItemTest: test_validates_title_presence
---------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
PurchaseTest: test_create_item
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? AND "items"."title" = 'item1' LIMIT 1  [["purchase_id", 980190963]]
  [1m[36m (3.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
PurchaseTest: test_get_total
----------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 298.02], ["created_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00], ["purchase_id", 980190963], ["title", "item2"], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 3.33], ["created_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00], ["purchase_id", 980190963], ["title", "item3"], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (2.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
PurchaseTest: test_reformat_phone_number
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
PurchaseTest: test_validates_owner_name_presence
------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
PurchaseTest: test_validates_phone_number
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.1ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
ReceiptTest: test_add_only_tip
------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.1ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 2.22], ["created_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?  [["purchase_id", 980190963]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963  [["amount", 1.1], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964[0m  [["amount", 2.44], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_add_tax_and_tip
---------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 2.22], ["created_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963[0m  [["amount", 1.18], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964  [["amount", 2.62], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
ReceiptTest: test_split_evenly
------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "receipts" ("created_at", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.1ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00], ["purchase_id", 980190963], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00], ["purchase_id", 980190964], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1[0m  [["purchase_id", 980190963]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190964]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35m (3.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_split_purchases
---------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_validates_title
---------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "receipts" ("created_at", "title", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00], ["title", "a"], ["updated_at", Mon, 04 Nov 2013 04:37:52 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (15.0ms)[0m  [1mrollback transaction[0m
  [1m[36m (5.8ms)[0m  [1mCREATE TABLE "items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "purchase_id" integer, "title" varchar(255), "amount" float, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.2ms)[0m  CREATE TABLE "purchases" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "owner_phone_number" varchar(255), "owner_name" varchar(255), "receipt_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.0ms)[0m  [1mCREATE TABLE "receipts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "title" varchar(255), "percent_paid" float, "total_amount" float, "tip" float, "split_type" varchar(255), "been_sent" boolean, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.0ms)[0m  CREATE TABLE "sessions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.3ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uid" integer, "name" varchar(255), "provider" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.3ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (3.0ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (3.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131103205453')[0m
  [1m[35m (2.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043855')
  [1m[36m (3.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131023043918')[0m
  [1m[35m (3.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043939')
  [1m[36m (3.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131101195444')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "items"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "items" ("purchase_id", "title", "amount", "created_at", "updated_at", "id") VALUES (1, 'a', 1.0, '2013-11-04 04:38:12', '2013-11-04 04:38:12', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "items" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:38:12', '2013-11-04 04:38:12', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "purchases"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "purchases" ("owner_name", "receipt_id", "owner_phone_number", "created_at", "updated_at", "id") VALUES ('test_owner_1', 1, '0000000000', '2013-11-04 04:38:12', '2013-11-04 04:38:12', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "purchases" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:38:12', '2013-11-04 04:38:12', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "receipts"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "receipts" ("id", "user_id", "title", "split_type", "been_sent", "created_at", "updated_at") VALUES (1, 1, 'test_receipt_1', 'Split Evenly', 'f', '2013-11-04 04:38:12', '2013-11-04 04:38:12')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "receipts" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:38:12', '2013-11-04 04:38:12', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "sessions"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:38:12', '2013-11-04 04:38:12', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:38:12', '2013-11-04 04:38:12', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("id", "uid", "name", "provider", "created_at", "updated_at") VALUES (1, 123456, 'test_user_1', 'venmo', '2013-11-04 04:38:12', '2013-11-04 04:38:12')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:38:12', '2013-11-04 04:38:12', 298486374)[0m
  [1m[35m (4.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
ItemTest: test_validates_amount_presence
----------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------
ItemTest: test_validates_title_presence
---------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
PurchaseTest: test_create_item
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.3ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? AND "items"."title" = 'item1' LIMIT 1  [["purchase_id", 980190963]]
  [1m[36m (3.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------
PurchaseTest: test_get_total
----------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 298.02], ["created_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00], ["purchase_id", 980190963], ["title", "item2"], ["updated_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 3.33], ["created_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00], ["purchase_id", 980190963], ["title", "item3"], ["updated_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (3.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
PurchaseTest: test_reformat_phone_number
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
PurchaseTest: test_validates_owner_name_presence
------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
PurchaseTest: test_validates_phone_number
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------
ReceiptTest: test_add_only_tip
------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 2.22], ["created_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?  [["purchase_id", 980190963]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963  [["amount", 1.1], ["updated_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964[0m  [["amount", 2.44], ["updated_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_add_tax_and_tip
---------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 2.22], ["created_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963[0m  [["amount", 1.18], ["updated_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964  [["amount", 2.62], ["updated_at", Mon, 04 Nov 2013 04:38:12 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
ReceiptTest: test_split_evenly
------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "receipts" ("created_at", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:38:13 UTC +00:00], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:38:13 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:38:13 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:38:13 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.1ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:38:13 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:38:13 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:38:13 UTC +00:00], ["purchase_id", 980190963], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:38:13 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:38:13 UTC +00:00], ["purchase_id", 980190964], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:38:13 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1[0m  [["purchase_id", 980190963]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190964]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35m (3.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_split_purchases
---------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_validates_title
---------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "receipts" ("created_at", "title", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:38:13 UTC +00:00], ["title", "a"], ["updated_at", Mon, 04 Nov 2013 04:38:13 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[36m (6.2ms)[0m  [1mCREATE TABLE "items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "purchase_id" integer, "title" varchar(255), "amount" float, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.3ms)[0m  CREATE TABLE "purchases" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "owner_phone_number" varchar(255), "owner_name" varchar(255), "receipt_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (2.9ms)[0m  [1mCREATE TABLE "receipts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "title" varchar(255), "percent_paid" float, "total_amount" float, "tip" float, "split_type" varchar(255), "been_sent" boolean, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.1ms)[0m  CREATE TABLE "sessions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.1ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uid" integer, "name" varchar(255), "provider" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.2ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (3.8ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (3.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131103205453')[0m
  [1m[35m (3.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043855')
  [1m[36m (3.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131023043918')[0m
  [1m[35m (2.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043939')
  [1m[36m (2.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131101195444')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "items"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "items" ("purchase_id", "title", "amount", "created_at", "updated_at", "id") VALUES (1, 'a', 1.0, '2013-11-04 04:38:49', '2013-11-04 04:38:49', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "items" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:38:49', '2013-11-04 04:38:49', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "purchases"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "purchases" ("owner_name", "receipt_id", "owner_phone_number", "created_at", "updated_at", "id") VALUES ('test_owner_1', 1, '0000000000', '2013-11-04 04:38:49', '2013-11-04 04:38:49', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "purchases" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:38:49', '2013-11-04 04:38:49', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "receipts"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "receipts" ("id", "user_id", "title", "split_type", "been_sent", "created_at", "updated_at") VALUES (1, 1, 'test_receipt_1', 'Split Evenly', 'f', '2013-11-04 04:38:49', '2013-11-04 04:38:49')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "receipts" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:38:49', '2013-11-04 04:38:49', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "sessions"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:38:49', '2013-11-04 04:38:49', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:38:49', '2013-11-04 04:38:49', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("id", "uid", "name", "provider", "created_at", "updated_at") VALUES (1, 123456, 'test_user_1', 'venmo', '2013-11-04 04:38:49', '2013-11-04 04:38:49')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:38:49', '2013-11-04 04:38:49', 298486374)[0m
  [1m[35m (4.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
ItemTest: test_validates_amount_presence
----------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.2ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------
ItemTest: test_validates_title_presence
---------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
PurchaseTest: test_create_item
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.2ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? AND "items"."title" = 'item1' LIMIT 1  [["purchase_id", 980190963]]
  [1m[36m (3.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------
PurchaseTest: test_get_total
----------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 298.02], ["created_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00], ["purchase_id", 980190963], ["title", "item2"], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 3.33], ["created_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00], ["purchase_id", 980190963], ["title", "item3"], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (3.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
PurchaseTest: test_reformat_phone_number
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
PurchaseTest: test_validates_owner_name_presence
------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
PurchaseTest: test_validates_phone_number
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------
ReceiptTest: test_add_only_tip
------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.1ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 2.22], ["created_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?  [["purchase_id", 980190963]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963  [["amount", 1.1], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964[0m  [["amount", 2.44], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_add_tax_and_tip
---------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00], ["tip", 20.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 2.22], ["created_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963[0m  [["amount", 1.28], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964  [["amount", 2.84], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
ReceiptTest: test_split_evenly
------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "receipts" ("created_at", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.1ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00], ["purchase_id", 980190963], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00], ["purchase_id", 980190964], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1[0m  [["purchase_id", 980190963]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190964]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35m (3.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_split_purchases
---------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_validates_title
---------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "receipts" ("created_at", "title", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00], ["title", "a"], ["updated_at", Mon, 04 Nov 2013 04:38:49 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.4ms)[0m  [1mrollback transaction[0m
  [1m[36m (6.0ms)[0m  [1mCREATE TABLE "items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "purchase_id" integer, "title" varchar(255), "amount" float, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.1ms)[0m  CREATE TABLE "purchases" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "owner_phone_number" varchar(255), "owner_name" varchar(255), "receipt_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.2ms)[0m  [1mCREATE TABLE "receipts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "title" varchar(255), "percent_paid" float, "total_amount" float, "tip" float, "split_type" varchar(255), "been_sent" boolean, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (4.2ms)[0m  CREATE TABLE "sessions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.4ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uid" integer, "name" varchar(255), "provider" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.3ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (3.3ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (3.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131103205453')[0m
  [1m[35m (3.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043855')
  [1m[36m (3.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131023043918')[0m
  [1m[35m (3.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043939')
  [1m[36m (3.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131101195444')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "items"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "items" ("purchase_id", "title", "amount", "created_at", "updated_at", "id") VALUES (1, 'a', 1.0, '2013-11-04 04:39:17', '2013-11-04 04:39:17', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "items" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:39:17', '2013-11-04 04:39:17', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "purchases"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "purchases" ("owner_name", "receipt_id", "owner_phone_number", "created_at", "updated_at", "id") VALUES ('test_owner_1', 1, '0000000000', '2013-11-04 04:39:17', '2013-11-04 04:39:17', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "purchases" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:39:17', '2013-11-04 04:39:17', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "receipts"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "receipts" ("id", "user_id", "title", "split_type", "been_sent", "created_at", "updated_at") VALUES (1, 1, 'test_receipt_1', 'Split Evenly', 'f', '2013-11-04 04:39:17', '2013-11-04 04:39:17')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "receipts" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:39:17', '2013-11-04 04:39:17', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "sessions"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:39:17', '2013-11-04 04:39:17', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:39:17', '2013-11-04 04:39:17', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("id", "uid", "name", "provider", "created_at", "updated_at") VALUES (1, 123456, 'test_user_1', 'venmo', '2013-11-04 04:39:17', '2013-11-04 04:39:17')
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:39:17', '2013-11-04 04:39:17', 298486374)[0m
  [1m[35m (4.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
ItemTest: test_validates_amount_presence
----------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.2ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------
ItemTest: test_validates_title_presence
---------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
PurchaseTest: test_create_item
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.2ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? AND "items"."title" = 'item1' LIMIT 1  [["purchase_id", 980190963]]
  [1m[36m (3.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
PurchaseTest: test_get_total
----------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 298.02], ["created_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00], ["purchase_id", 980190963], ["title", "item2"], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 3.33], ["created_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00], ["purchase_id", 980190963], ["title", "item3"], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (2.9ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
PurchaseTest: test_reformat_phone_number
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
PurchaseTest: test_validates_owner_name_presence
------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
PurchaseTest: test_validates_phone_number
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
ReceiptTest: test_add_only_tip
------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 2.22], ["created_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?  [["purchase_id", 980190963]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963  [["amount", 1.1], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964[0m  [["amount", 2.44], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_add_tax_and_tip
---------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 2.2], ["created_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963[0m  [["amount", 1.18], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964  [["amount", 2.6], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
ReceiptTest: test_split_evenly
------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "receipts" ("created_at", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00], ["purchase_id", 980190963], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00], ["purchase_id", 980190964], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1[0m  [["purchase_id", 980190963]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190964]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35m (3.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_split_purchases
---------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_validates_title
---------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "receipts" ("created_at", "title", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00], ["title", "a"], ["updated_at", Mon, 04 Nov 2013 04:39:17 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.3ms)[0m  [1mrollback transaction[0m
  [1m[36m (4.9ms)[0m  [1mCREATE TABLE "items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "purchase_id" integer, "title" varchar(255), "amount" float, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.1ms)[0m  CREATE TABLE "purchases" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "owner_phone_number" varchar(255), "owner_name" varchar(255), "receipt_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.1ms)[0m  [1mCREATE TABLE "receipts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "title" varchar(255), "percent_paid" float, "total_amount" float, "tip" float, "split_type" varchar(255), "been_sent" boolean, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.1ms)[0m  CREATE TABLE "sessions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.0ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uid" integer, "name" varchar(255), "provider" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.1ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (3.3ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (3.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131103205453')[0m
  [1m[35m (3.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043855')
  [1m[36m (2.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131023043918')[0m
  [1m[35m (3.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043939')
  [1m[36m (3.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131101195444')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "items"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "items" ("purchase_id", "title", "amount", "created_at", "updated_at", "id") VALUES (1, 'a', 1.0, '2013-11-04 04:40:25', '2013-11-04 04:40:25', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "items" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:40:25', '2013-11-04 04:40:25', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "purchases"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "purchases" ("owner_name", "receipt_id", "owner_phone_number", "created_at", "updated_at", "id") VALUES ('test_owner_1', 1, '0000000000', '2013-11-04 04:40:25', '2013-11-04 04:40:25', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "purchases" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:40:25', '2013-11-04 04:40:25', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "receipts"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "receipts" ("id", "user_id", "title", "split_type", "been_sent", "created_at", "updated_at") VALUES (1, 1, 'test_receipt_1', 'Split Evenly', 'f', '2013-11-04 04:40:25', '2013-11-04 04:40:25')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "receipts" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:40:25', '2013-11-04 04:40:25', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "sessions"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:40:25', '2013-11-04 04:40:25', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:40:25', '2013-11-04 04:40:25', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("id", "uid", "name", "provider", "created_at", "updated_at") VALUES (1, 123456, 'test_user_1', 'venmo', '2013-11-04 04:40:25', '2013-11-04 04:40:25')
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:40:25', '2013-11-04 04:40:25', 298486374)[0m
  [1m[35m (4.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
ItemTest: test_validates_amount_presence
----------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.2ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------
ItemTest: test_validates_title_presence
---------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
PurchaseTest: test_create_item
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? AND "items"."title" = 'item1' LIMIT 1  [["purchase_id", 980190963]]
  [1m[36m (2.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
PurchaseTest: test_get_total
----------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 298.02], ["created_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00], ["purchase_id", 980190963], ["title", "item2"], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 3.33], ["created_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00], ["purchase_id", 980190963], ["title", "item3"], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
PurchaseTest: test_reformat_phone_number
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
PurchaseTest: test_validates_owner_name_presence
------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
PurchaseTest: test_validates_phone_number
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------
ReceiptTest: test_add_only_tip
------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 2.22], ["created_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?  [["purchase_id", 980190963]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963  [["amount", 1.1], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964[0m  [["amount", 2.44], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_add_tax_and_tip
---------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 2.2], ["created_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963[0m  [["amount", 1.18], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964  [["amount", 2.6], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
ReceiptTest: test_split_evenly
------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "receipts" ("created_at", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00], ["purchase_id", 980190963], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00], ["purchase_id", 980190964], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1[0m  [["purchase_id", 980190963]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190964]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35m (3.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_split_purchases
---------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_validates_title
---------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "receipts" ("created_at", "title", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00], ["title", "a"], ["updated_at", Mon, 04 Nov 2013 04:40:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.8ms)[0m  [1mrollback transaction[0m
  [1m[36m (7.0ms)[0m  [1mCREATE TABLE "items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "purchase_id" integer, "title" varchar(255), "amount" float, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.4ms)[0m  CREATE TABLE "purchases" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "owner_phone_number" varchar(255), "owner_name" varchar(255), "receipt_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.2ms)[0m  [1mCREATE TABLE "receipts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "title" varchar(255), "percent_paid" float, "total_amount" float, "tip" float, "split_type" varchar(255), "been_sent" boolean, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.1ms)[0m  CREATE TABLE "sessions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.2ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uid" integer, "name" varchar(255), "provider" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.2ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (3.0ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (3.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131103205453')[0m
  [1m[35m (3.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043855')
  [1m[36m (2.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131023043918')[0m
  [1m[35m (3.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043939')
  [1m[36m (2.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131101195444')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "items"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "items" ("purchase_id", "title", "amount", "created_at", "updated_at", "id") VALUES (1, 'a', 1.0, '2013-11-04 04:40:41', '2013-11-04 04:40:41', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "items" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:40:41', '2013-11-04 04:40:41', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "purchases"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "purchases" ("owner_name", "receipt_id", "owner_phone_number", "created_at", "updated_at", "id") VALUES ('test_owner_1', 1, '0000000000', '2013-11-04 04:40:41', '2013-11-04 04:40:41', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "purchases" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:40:41', '2013-11-04 04:40:41', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "receipts"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "receipts" ("id", "user_id", "title", "split_type", "been_sent", "created_at", "updated_at") VALUES (1, 1, 'test_receipt_1', 'Split Evenly', 'f', '2013-11-04 04:40:41', '2013-11-04 04:40:41')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "receipts" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:40:41', '2013-11-04 04:40:41', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "sessions"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:40:41', '2013-11-04 04:40:41', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:40:41', '2013-11-04 04:40:41', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("id", "uid", "name", "provider", "created_at", "updated_at") VALUES (1, 123456, 'test_user_1', 'venmo', '2013-11-04 04:40:41', '2013-11-04 04:40:41')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:40:41', '2013-11-04 04:40:41', 298486374)[0m
  [1m[35m (5.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
ItemTest: test_validates_amount_presence
----------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.2ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------
ItemTest: test_validates_title_presence
---------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
PurchaseTest: test_create_item
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? AND "items"."title" = 'item1' LIMIT 1  [["purchase_id", 980190963]]
  [1m[36m (3.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
PurchaseTest: test_get_total
----------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 298.02], ["created_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00], ["purchase_id", 980190963], ["title", "item2"], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 3.33], ["created_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00], ["purchase_id", 980190963], ["title", "item3"], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (3.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
PurchaseTest: test_reformat_phone_number
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
PurchaseTest: test_validates_owner_name_presence
------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
PurchaseTest: test_validates_phone_number
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
ReceiptTest: test_add_only_tip
------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 2.22], ["created_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?  [["purchase_id", 980190963]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963  [["amount", 1.1], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964[0m  [["amount", 2.44], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.2ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_add_tax_and_tip
---------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 2.2], ["created_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963[0m  [["amount", 1.18], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964  [["amount", 2.6], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
ReceiptTest: test_split_evenly
------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "receipts" ("created_at", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00], ["purchase_id", 980190963], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00], ["purchase_id", 980190964], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1[0m  [["purchase_id", 980190963]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190964]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35m (3.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_split_purchases
---------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_validates_title
---------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "receipts" ("created_at", "title", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00], ["title", "a"], ["updated_at", Mon, 04 Nov 2013 04:40:41 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (4.0ms)[0m  [1mrollback transaction[0m
  [1m[36m (5.8ms)[0m  [1mCREATE TABLE "items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "purchase_id" integer, "title" varchar(255), "amount" float, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.1ms)[0m  CREATE TABLE "purchases" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "owner_phone_number" varchar(255), "owner_name" varchar(255), "receipt_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.1ms)[0m  [1mCREATE TABLE "receipts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "title" varchar(255), "percent_paid" float, "total_amount" float, "tip" float, "split_type" varchar(255), "been_sent" boolean, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.3ms)[0m  CREATE TABLE "sessions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.5ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uid" integer, "name" varchar(255), "provider" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.4ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (3.2ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (3.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131103205453')[0m
  [1m[35m (3.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043855')
  [1m[36m (3.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131023043918')[0m
  [1m[35m (2.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043939')
  [1m[36m (3.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131101195444')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "items"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "items" ("purchase_id", "title", "amount", "created_at", "updated_at", "id") VALUES (1, 'a', 1.0, '2013-11-04 04:41:10', '2013-11-04 04:41:10', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "items" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:41:10', '2013-11-04 04:41:10', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "purchases"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "purchases" ("owner_name", "receipt_id", "owner_phone_number", "created_at", "updated_at", "id") VALUES ('test_owner_1', 1, '0000000000', '2013-11-04 04:41:10', '2013-11-04 04:41:10', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "purchases" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:41:10', '2013-11-04 04:41:10', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "receipts"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "receipts" ("id", "user_id", "title", "split_type", "been_sent", "created_at", "updated_at") VALUES (1, 1, 'test_receipt_1', 'Split Evenly', 'f', '2013-11-04 04:41:10', '2013-11-04 04:41:10')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "receipts" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:41:10', '2013-11-04 04:41:10', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "sessions"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:41:10', '2013-11-04 04:41:10', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:41:10', '2013-11-04 04:41:10', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("id", "uid", "name", "provider", "created_at", "updated_at") VALUES (1, 123456, 'test_user_1', 'venmo', '2013-11-04 04:41:10', '2013-11-04 04:41:10')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:41:10', '2013-11-04 04:41:10', 298486374)[0m
  [1m[35m (4.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
ItemTest: test_validates_amount_presence
----------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------
ItemTest: test_validates_title_presence
---------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
PurchaseTest: test_create_item
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? AND "items"."title" = 'item1' LIMIT 1  [["purchase_id", 980190963]]
  [1m[36m (3.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------
PurchaseTest: test_get_total
----------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 298.02], ["created_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00], ["purchase_id", 980190963], ["title", "item2"], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 3.33], ["created_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00], ["purchase_id", 980190963], ["title", "item3"], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
PurchaseTest: test_reformat_phone_number
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
PurchaseTest: test_validates_owner_name_presence
------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
PurchaseTest: test_validates_phone_number
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------
ReceiptTest: test_add_only_tip
------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 2.22], ["created_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?  [["purchase_id", 980190963]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963  [["amount", 1.1], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964[0m  [["amount", 2.44], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_add_tax_and_tip
---------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.01], ["created_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 2.21], ["created_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963[0m  [["amount", 1.19], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964  [["amount", 2.61], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.8ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
ReceiptTest: test_split_evenly
------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "receipts" ("created_at", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00], ["purchase_id", 980190963], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00], ["purchase_id", 980190964], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1[0m  [["purchase_id", 980190963]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190964]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35m (3.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_split_purchases
---------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_validates_title
---------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "receipts" ("created_at", "title", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00], ["title", "a"], ["updated_at", Mon, 04 Nov 2013 04:41:10 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.8ms)[0m  [1mrollback transaction[0m
  [1m[36m (6.0ms)[0m  [1mCREATE TABLE "items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "purchase_id" integer, "title" varchar(255), "amount" float, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.4ms)[0m  CREATE TABLE "purchases" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "owner_phone_number" varchar(255), "owner_name" varchar(255), "receipt_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.3ms)[0m  [1mCREATE TABLE "receipts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "title" varchar(255), "percent_paid" float, "total_amount" float, "tip" float, "split_type" varchar(255), "been_sent" boolean, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.1ms)[0m  CREATE TABLE "sessions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.2ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uid" integer, "name" varchar(255), "provider" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.4ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (3.3ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (3.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131103205453')[0m
  [1m[35m (3.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043855')
  [1m[36m (2.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131023043918')[0m
  [1m[35m (3.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043939')
  [1m[36m (3.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131101195444')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "items"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "items" ("purchase_id", "title", "amount", "created_at", "updated_at", "id") VALUES (1, 'a', 1.0, '2013-11-04 04:41:23', '2013-11-04 04:41:23', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "items" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:41:23', '2013-11-04 04:41:23', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "purchases"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "purchases" ("owner_name", "receipt_id", "owner_phone_number", "created_at", "updated_at", "id") VALUES ('test_owner_1', 1, '0000000000', '2013-11-04 04:41:23', '2013-11-04 04:41:23', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "purchases" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:41:23', '2013-11-04 04:41:23', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "receipts"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "receipts" ("id", "user_id", "title", "split_type", "been_sent", "created_at", "updated_at") VALUES (1, 1, 'test_receipt_1', 'Split Evenly', 'f', '2013-11-04 04:41:23', '2013-11-04 04:41:23')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "receipts" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:41:23', '2013-11-04 04:41:23', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "sessions"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:41:23', '2013-11-04 04:41:23', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 04:41:23', '2013-11-04 04:41:23', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("id", "uid", "name", "provider", "created_at", "updated_at") VALUES (1, 123456, 'test_user_1', 'venmo', '2013-11-04 04:41:23', '2013-11-04 04:41:23')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2013-11-04 04:41:23', '2013-11-04 04:41:23', 298486374)[0m
  [1m[35m (4.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
ItemTest: test_validates_amount_presence
----------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------
ItemTest: test_validates_title_presence
---------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
PurchaseTest: test_create_item
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.2ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? AND "items"."title" = 'item1' LIMIT 1  [["purchase_id", 980190963]]
  [1m[36m (3.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
PurchaseTest: test_get_total
----------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 298.02], ["created_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00], ["purchase_id", 980190963], ["title", "item2"], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 3.33], ["created_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00], ["purchase_id", 980190963], ["title", "item3"], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
PurchaseTest: test_reformat_phone_number
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
PurchaseTest: test_validates_owner_name_presence
------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
PurchaseTest: test_validates_phone_number
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.1ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
ReceiptTest: test_add_only_tip
------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.1ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 2.22], ["created_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?  [["purchase_id", 980190963]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963  [["amount", 1.1], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964[0m  [["amount", 2.44], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_add_tax_and_tip
---------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.01], ["created_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 2.21], ["created_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963[0m  [["amount", 1.19], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964  [["amount", 2.61], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
ReceiptTest: test_split_evenly
------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "receipts" ("created_at", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.1ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00], ["purchase_id", 980190963], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00], ["purchase_id", 980190964], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1[0m  [["purchase_id", 980190963]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190964]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35m (3.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_split_purchases
---------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------
ReceiptTest: test_validates_title
---------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "receipts" ("created_at", "title", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00], ["title", "a"], ["updated_at", Mon, 04 Nov 2013 04:41:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.8ms)[0m  [1mrollback transaction[0m
  [1m[36m (6.8ms)[0m  [1mCREATE TABLE "items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "purchase_id" integer, "title" varchar(255), "amount" float, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.1ms)[0m  CREATE TABLE "purchases" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "owner_phone_number" varchar(255), "owner_name" varchar(255), "receipt_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (2.9ms)[0m  [1mCREATE TABLE "receipts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "title" varchar(255), "percent_paid" float, "total_amount" float, "tip" float, "split_type" varchar(255), "been_sent" boolean, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.1ms)[0m  CREATE TABLE "sessions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.0ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uid" integer, "name" varchar(255), "provider" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (3.1ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (3.1ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (3.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131103205453')[0m
  [1m[35m (2.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043855')
  [1m[36m (2.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131023043918')[0m
  [1m[35m (2.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131023043939')
  [1m[36m (2.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131101195444')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "items"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "items" ("purchase_id", "title", "amount", "created_at", "updated_at", "id") VALUES (1, 'a', 1.0, '2013-11-04 05:02:48', '2013-11-04 05:02:48', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "items" ("created_at", "updated_at", "id") VALUES ('2013-11-04 05:02:48', '2013-11-04 05:02:48', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "purchases"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "purchases" ("owner_name", "receipt_id", "owner_phone_number", "created_at", "updated_at", "id") VALUES ('test_owner_1', 1, '0000000000', '2013-11-04 05:02:48', '2013-11-04 05:02:48', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "purchases" ("created_at", "updated_at", "id") VALUES ('2013-11-04 05:02:48', '2013-11-04 05:02:48', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "receipts"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "receipts" ("id", "user_id", "title", "split_type", "been_sent", "created_at", "updated_at") VALUES (1, 1, 'test_receipt_1', 'Split Evenly', 'f', '2013-11-04 05:02:48', '2013-11-04 05:02:48')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "receipts" ("created_at", "updated_at", "id") VALUES ('2013-11-04 05:02:48', '2013-11-04 05:02:48', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "sessions"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 05:02:48', '2013-11-04 05:02:48', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "sessions" ("user_id", "created_at", "updated_at", "id") VALUES (1, '2013-11-04 05:02:48', '2013-11-04 05:02:48', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("id", "uid", "name", "provider", "created_at", "updated_at") VALUES (1, 123456, 'test_user_1', 'venmo', '2013-11-04 05:02:48', '2013-11-04 05:02:48')
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2013-11-04 05:02:48', '2013-11-04 05:02:48', 298486374)[0m
  [1m[35m (4.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
ItemTest: test_validates_amount_presence
----------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.2ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------
ItemTest: test_validates_title_presence
---------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
PurchaseTest: test_create_item
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.2ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? AND "items"."title" = 'item1' LIMIT 1  [["purchase_id", 980190963]]
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
PurchaseTest: test_get_total
----------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 298.02], ["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["purchase_id", 980190963], ["title", "item2"], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 3.33], ["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["purchase_id", 980190963], ["title", "item3"], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (3.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
PurchaseTest: test_reformat_phone_number
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
PurchaseTest: test_validates_owner_name_presence
------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
PurchaseTest: test_validates_phone_number
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["owner_name", "test_user_1"], ["owner_phone_number", "1234567890"], ["receipt_id", 1], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.1ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 1]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------
ReceiptTest: test_add_only_tip
------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.0], ["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 2.22], ["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?  [["purchase_id", 980190963]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963  [["amount", 1.1], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964[0m  [["amount", 2.44], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------
ReceiptTest: test_add_tax_and_tip
---------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "receipts" ("created_at", "tip", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["tip", 10.0], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.1ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 1.01], ["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 2.21], ["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["purchase_id", 980190963], ["title", "item1"], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?  [["purchase_id", 980190963]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963  [["amount", 1.19], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964[0m  [["amount", 2.61], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------
ReceiptTest: test_split_evenly
------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "receipts" ("created_at", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["purchase_id", 980190963], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["purchase_id", 980190964], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1[0m  [["purchase_id", 980190963]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1  [["purchase_id", 980190963]]
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1[0m  [["purchase_id", 980190964]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" DESC LIMIT 1  [["purchase_id", 980190964]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1[0m  [["purchase_id", 980190963]]
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ? ORDER BY "items"."id" ASC LIMIT 1  [["purchase_id", 980190964]]
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------
ReceiptTest: test_split_purchases
---------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "receipts" ("created_at", "split_type", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["split_type", "Split Evenly"], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.1ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486375]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486375]]
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486375]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486375], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486375]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["purchase_id", 980190963], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["purchase_id", 980190964], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190963]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190963[0m  [["amount", 4.32], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190964]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "items" SET "amount" = ?, "updated_at" = ? WHERE "items"."id" = 980190964[0m  [["amount", 4.32], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "receipts" ("created_at", "split_type", "title", "total_amount", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["split_type", "Split Evenly"], ["title", "test_receipt_1"], ["total_amount", 12.0], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mReceipt Load (0.0ms)[0m  [1mSELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1[0m  [["id", 298486376]]
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486376]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["owner_name", "test_owner_1"], ["owner_phone_number", "1111111111"], ["receipt_id", 298486376], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mReceipt Load (0.0ms)[0m  SELECT "receipts".* FROM "receipts" WHERE "receipts"."id" = ? ORDER BY "receipts"."id" ASC LIMIT 1  [["id", 298486376]]
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?[0m  [["receipt_id", 298486376]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "owner_name", "owner_phone_number", "receipt_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["owner_name", "test_owner_2"], ["owner_phone_number", "2222222222"], ["receipt_id", 298486376], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."receipt_id" = ?  [["receipt_id", 298486376]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["purchase_id", 980190965], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("amount", "created_at", "purchase_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 4.0], ["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["purchase_id", 980190966], ["title", "even split contribution"], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?[0m  [["purchase_id", 980190965]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" WHERE "items"."purchase_id" = ?  [["purchase_id", 980190966]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------
ReceiptTest: test_validates_title
---------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "receipts" ("created_at", "title", "updated_at") VALUES (?, ?, ?)  [["created_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00], ["title", "a"], ["updated_at", Mon, 04 Nov 2013 05:02:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.7ms)[0m  rollback transaction
